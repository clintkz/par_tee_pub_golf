<div class="container-courses">
  <!--<div class="container mt-4">-->
  <h1>Game Details</h1>
  <p>Course: <%= @game.course.name %></p>
  <p>Date and Time: <%= @game.date_time %></p>

  <h2>Participants</h2>
  <ul>
    <% @participants.each do |participant| %>
      <li>
        <%= participant.user.email %>:
          <% if participant.user_id == @game.user_id %>
              Organizer
            <% elsif participant.user == current_user %>
              <% if participant.status == 'accepted' %>
                Accepted
              <% elsif participant.status == 'declined' %>
                Declined
              <% else %>
                <%= button_to 'Accept', accept_game_participant_path(@game, participant), method: :patch, class: 'btn btn-success' %>
                <%= button_to 'Decline', decline_game_participant_path(@game, participant), method: :patch, class: 'btn btn-danger' %>
              <% end %>
            <% else %>
              <%= participant.status || 'No Response' %>
          <% end %>

        <% if participant.status == 'accepted' || participant.user_id == @game.user_id %>
          - Arrived: <%= participant.arrived ? 'Yes' : 'No' %>
        <% end %>
        <% if (participant.user == current_user && (participant.status == 'accepted' || current_user.id == @game.user_id)) %>
          <%= button_to 'Mark as Arrived', mark_as_arrived_game_participant_path(@game, participant), method: :patch, class: 'btn btn-primary' unless participant.arrived %>
        <% end %>
      </li>
    <% end %>

  <% if current_user.id == @game.user_id && @game.status != "started" %>
    <%= button_to 'Start Game', start_game_path(@game), method: :post %>
  <% end %>

  <% participant = @game.participants.find_by(user: current_user) %>
  <% if @game.status == "started" && participant&.status == 'accepted' %>
    <%= button_to 'Tee-off', start_game_path(@game), method: :post %>
  <% end %>

  </ul>
</div>
