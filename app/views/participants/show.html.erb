<div class="container-courses">
<%= @user_first_name %>
</div>

<div class="container-parent">
  <h2><%= @course.name %></h2>
   <%= @pub.id %>
   <p> <%= @pub %> </p>
      <div class="card-pub">
        <p class="pub-name"><%= @pub.name  %></p>
        <p class="pub-address">Addresss: <%= @pub.address %></p>
        <p class="pub-drink">Drink: <%= @pub.drink %></p>
        <p class="pub-strokes">Par: <%= @pub.strokes %></p>
      </div>
<%# <% end %>
      <%# <div class="container">
          <%= form_with(model: [@game, @participant], class: 'form') do |form| %>
      <%# </div> %>
    <div class="container">
      <% if @last_element == false %>
        <%= link_to 'Next Pub', game_participant_path(pub_id: @pub.id) %>
      <% else %>
        <%= link_to 'Final Scores', game_participant_path %>
      <%end%>
    </div>
    <%# <div class="form-group"> %>
      <%# <%= form.submit "Next Pub", class: 'btn btn-primary' %>
    <%# </div> %>
  <%# <% end %>
      </div>
</div>

<h1>Scorecard:</h1>
<% @course.pubs.each do |pub| %>
  <h3><%= pub.name %></h3>
  <table>
    <thead>
      <tr>
        <th>Participant</th>
        <th>Score</th>
      </tr>
    </thead>
    <tbody>
      <% @game.participants.each do |participant| %>
        <tr>
          <td><%= participant.user.email %></td>
          <td>
            <% score = participant.pub_scores.find_or_initialize_by(pub: pub) %>
            <% if participant.user == current_user %>
              <%= form_with(model: [participant, score]) do |form| %>
                <%= form.number_field :score %>
                <%= form.hidden_field :pub_id, value: pub.id %>
                <%= form.submit "Save" %>
              <% end %>
            <% else %>
              <%= score&.score || "No Score" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
